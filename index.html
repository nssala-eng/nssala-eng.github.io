<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NSSALA â€” Smart Student System</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<style>
    :root {
        --bg:#0D1117;
        --panel:#161B22;
        --accent:#3A63F3;
        --glass:rgba(255,255,255,0.04);
    }

    * {
        scroll-behavior: smooth;
    }

    body {
        margin:0;
        background:var(--bg);
        font-family:"Poppins",sans-serif;
        color:white;
    }

    header {
        padding:20px;
        text-align:center;
        background:#13161F;
        font-size:26px;
        font-weight:600;
        border-bottom:1px solid rgba(255,255,255,0.08);
        animation:slideDown .6s ease;
    }

    @keyframes slideDown {
        from {transform:translateY(-40px);opacity:0;}
        to {transform:translateY(0);opacity:1;}
    }

    .page {
        padding:25px;
        display:none;
        animation:fade .5s ease;
    }

    @keyframes fade {
        from {opacity:0; transform:translateY(10px);}
        to {opacity:1; transform:translateY(0);}
    }

    input {
        width:95%;
        padding:13px;
        border-radius:10px;
        background:#202632;
        color:white;
        border:none;
        margin-top:10px;
        font-size:14px;
    }

    button {
        padding:13px;
        width:100%;
        background:var(--accent);
        border:none;
        color:white;
        border-radius:10px;
        margin-top:10px;
        font-weight:600;
        cursor:pointer;
        transition:.25s;
    }

    button:hover {
        background:#2D4FCD;
        transform:translateY(-2px);
    }

    .flex {
        display:flex;
        gap:10px;
        margin-top:15px;
    }

    .card {
        background:var(--panel);
        padding:20px;
        border-radius:15px;
        margin-bottom:20px;
        box-shadow:0 0 20px rgba(0,0,0,0.4);
        border:1px solid rgba(255,255,255,0.03);
        transition:0.3s;
    }

    .card:hover {
        transform:scale(1.02);
    }

    .nav-btn {
        flex:1;
        background:#222736;
        border-radius:10px;
        padding:10px;
        cursor:pointer;
        text-align:center;
        transition:.25s;
    }

    .nav-btn:hover {
        background:#2a3245;
    }

    .title {
        font-size:20px;
        font-weight:600;
        margin-bottom:10px;
    }

    textarea {
        width:95%;
        height:80px;
        border-radius:12px;
        background:#202632;
        color:white;
        border:none;
        margin-top:10px;
        padding:10px;
    }

    .log {
        font-size:13px;
        margin-top:10px;
        line-height:1.7;
        opacity:.8;
    }

</style>
</head>

<body>

<header>NSSALA â€” Smart Student Monitoring + NSA AI</header>

<!-- AUTH PAGE -->
<div id="authPage" class="page" style="display:block;">
    <h2>Login to Continue</h2>
    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <button onclick="signup()">Create New Account</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="page">
    <h2>Hello, <span id="userEmail"></span></h2>

    <div class="flex">
        <div class="nav-btn" onclick="showSection('aiPanel')">NSA AI</div>
        <div class="nav-btn" onclick="showSection('attendancePanel')">Attendance</div>
        <div class="nav-btn" onclick="showSection('locationPanel')">Location</div>
    </div>

    <div class="flex">
        <div class="nav-btn" onclick="showSection('timetable')">Timetable</div>
        <div class="nav-btn" onclick="showSection('reports')">Reports</div>
        <div class="nav-btn" onclick="logout()">Logout</div>
    </div>

    <!-- NSA AI -->
    <div id="aiPanel" class="card">
        <div class="title">NSA â€” Smart AI Assistant</div>
        <input id="aiInput" placeholder="Ask NSA anything...">
        <button onclick="askNSA()">Ask</button>
        <p id="aiResponse"></p>
    </div>

    <!-- Attendance -->
    <div id="attendancePanel" class="card" style="display:none;">
        <div class="title">Biometric-Style Attendance</div>
        <input id="studentName" placeholder="Student Name">
        <button onclick="markAttendance()">Mark Present</button>
        <div id="attendanceLog" class="log"></div>
    </div>

    <!-- SIMULATED LOCATION -->
    <div id="locationPanel" class="card" style="display:none;">
        <div class="title">Student Location (Simulated)</div>
        <button onclick="simulateLocation()">Update Location</button>
        <div id="locationLog" class="log"></div>
    </div>

    <!-- TIMETABLE -->
    <div id="timetable" class="card" style="display:none;">
        <div class="title">Timetable</div>
        <p class="log">
            Monday â€“ Maths, English, Chemistry <br>
            Tuesday â€“ Biology, Physics, Civic <br>
            Wednesday â€“ Further Maths, ICT <br>
            Thursday â€“ Lit-in-English, Yoruba/Igbo/Hausa <br>
            Friday â€“ Revision + Practical
        </p>
    </div>

    <!-- REPORTS -->
    <div id="reports" class="card" style="display:none;">
        <div class="title">Report Cards</div>
        <p class="log">
            Maths â€“ 88%<br>
            English â€“ 79%<br>
            Biology â€“ 92%<br>
            Chemistry â€“ 85%<br>
            Physics â€“ 91%<br>
        </p>
    </div>
</div>

<script>
/* -----------------------------
   FIREBASE CONFIG
--------------------------------*/
const firebaseConfig = {
    apiKey: "YOUR_KEY",
    authDomain: "YOUR_DOMAIN",
    databaseURL: "YOUR_DB",
    projectId: "YOUR_ID",
    storageBucket: "YOUR",
    messagingSenderId: "YOUR",
    appId: "YOUR",
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();

/* -----------------------------
   LOGIN + SIGNUP
--------------------------------*/
function login() {
    let e = email.value, p = password.value;
    auth.signInWithEmailAndPassword(e,p).then(showDash).catch(err=>alert(err.message));
}

function signup() {
    let e = email.value, p = password.value;
    auth.createUserWithEmailAndPassword(e,p).then(showDash).catch(err=>alert(err.message));
}

function logout() {
    auth.signOut();
    dashboard.style.display="none";
    authPage.style.display="block";
}

auth.onAuthStateChanged(user=>{
    if(user) showDash();
});

function showDash(){
    userEmail.textContent = auth.currentUser.email;
    authPage.style.display="none";
    dashboard.style.display="block";
    showSection("aiPanel");
}

/* -----------------------------
   SECTION SWITCHER
--------------------------------*/
function showSection(id){
    ["aiPanel","attendancePanel","locationPanel","timetable","reports"]
    .forEach(sec=>{
        document.getElementById(sec).style.display="none";
    });
    document.getElementById(id).style.display="block";
}

/* -----------------------------
   AI BRAIN (NSA)
--------------------------------*/
function askNSA(){
    let q = aiInput.value.toLowerCase();
    let r = "";

    if(q.includes("cell")||q.includes("organism")){
        r = "In biology, a cell is the basic structural & functional unit of life.";
    }
    else if(q.includes("atom")||q.includes("chemistry")){
        r = "An atom consists of protons, neutrons and electrons.";
    }
    else if(q.includes("solve")){
        r = "Send the full equation and Iâ€™ll solve it.";
    }
    else if(q.includes("sun")||q.includes("photosynthesis")){
        r = "Photosynthesis converts light energy into chemical energy in plants.";
    }
    else{
        r = "NSA: I need a clearer question ðŸ‘€";
    }

    aiResponse.textContent = r;
}

/* -----------------------------
   ATTENDANCE
--------------------------------*/
function markAttendance(){
    let name = studentName.value.trim();
    if(!name) return;

    let time = new Date().toLocaleString();

    db.ref("attendance/"+name).push({
        time:time,
        status:"PRESENT"
    });

    attendanceLog.innerHTML += `<div>${name} â€” Present @ ${time}</div>`;
}

/* -----------------------------
   LOCATION SIMULATION
--------------------------------*/
function simulateLocation(){
    const places = ["Home","School","Road","Church","Lesson Centre"];
    let pick = places[Math.floor(Math.random()*places.length)];

    let t = new Date().toLocaleTimeString();

    locationLog.innerHTML += `<div>Location: <b>${pick}</b> at ${t}</div>`;
}

</script>
</body>
</html>